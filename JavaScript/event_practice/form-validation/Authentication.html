<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Welcome page</title>
    <script>
        let cookie = document.cookie.split(';');
        console.log(cookie)
        let obj = {};
        let maps = cookie.map((val) => {
            let [key, value] = val.split('=');
            console.log(key,value);
            obj[key.trim()] = value.trim();
        });
        if(obj["isAuthenticate"]=="false"){
            console.log("User is not authenticated.");
              window.history.replaceState(null, '', 'login.html'); 
              location.href="login.html";  
        }
    </script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
        crossorigin="anonymous"></script>
    <script src="https://kit.fontawesome.com/3f2c09a521.js" crossorigin="anonymous"></script>
    <style>
        .nav-link{
            color:#8f8f92;
        }
        a{
            text-decoration: none;
            color:white;
        }
        .msg{
            color:#453186;
            font-size: 3rem;
        }
        .logout-btn{
            background-color:#AFAAD6;
            border: none;
            padding: 10px;
        }
        img{
            object-fit: cover;
        }
        .card{
            width:300px;
            height: 380px;
            padding: 20px;
        }
        .card img{
            width:100%;
            height: 200px;
            object-fit: contain;
        }
    </style>
</head>

<body>
   
        <div class="container h-100">
            <div class="container p-3 mt-3">
                <nav class="navbar navbar-expand-lg">
                    <a href="#" class="navbar-brand ms-3 text-uppercase fw-bold fs-4">Logome</a>
                    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar">
                        <span class="navbar-toggler-icon"></span>
                    </button>
                    <div class="collapse navbar-collapse justify-content-end align-items-center gap-5" id="navbar">
                        <ul class="navbar-nav gap-4 align-items-center">
                            <li class="nav-item"><a href="#" class="nav-link fw-semibold fs-5">Home</a></li>
                            <li class="nav-item"><a href="#" class="nav-link fw-semibold fs-5">About us</a></li>
                            <li class="nav-item"><a href="#" class="nav-link fw-semibold fs-5">Blog</a></li>
                            <li class="nav-item"><a href="#" class="nav-link fw-semibold fs-5">Contact us</a></li>
                            <button class="rounded-4 logout-btn"><a href="" id="logout">Logout</a></button>
                            <div class="position-relative">
                            <a href="./addtocart.html" id="logout"><i class="fa-solid fa-cart-shopping fa-lg" style="color: #B197FC;" id="cart"></i></a> <span class="position-absolute " id="cart-item"></span></div>
                        </ul>
                    </div>
                </nav>
            </div>
            <section class="hero container">
                <div class="container p-3 d-flex gap-5 flex-column-reverse flex-md-row align-items-center justify-content-center">
                    <div class="content d-flex flex-column gap-4">
                        <div class="msg">Welcome <span id="username"></span></div>
                        <p>Lorem ipsum, dolor sit amet consectetur adipisicing elit. Sapiente dolorem tenetur sit at eligendi voluptatibus ab similique. Corrupti, doloremque saepe.</p>
                    </div>
                    <div class="image"><img src="./illustration_dashboard.png" alt="right side image" width="550" height="330" class="object-fit-contain mt-2"></div>
                </div>
            </section>
        </div>
        <div class="container p-5">
            <div class="productList d-flex flex-wrap gap-5 justify-content-center align-items-center" id="productlist">
            </div>
        </div>
       
    <script>  
        console.log(obj);       
        console.log(obj['username']);
        document.getElementById("username").textContent = obj['username'];
        document.getElementById("logout").addEventListener("click", (e) => {
            document.cookie = "isAuthenticate=false";
            e.target.innerHTML = "Login";
            window.history.replaceState(null, '', 'login.html'); 
            location.href="login.html";    
        })
        const products = [
        { id: 1, name: 'Laptop', price: 80, imgSrc: './image/laptop.webp',quantity:1,total:this.price},
        { id: 2, name: 'Laptop', price: 80, imgSrc: './image/laptop2.jfif',quantity:1,total:this.price},
        { id: 3, name: 'Headphones', price: 20, imgSrc: './image/Headphones.webp',quantity:1,total:this.price},
        { id: 4, name: 'Headphones', price: 20, imgSrc: './image/Headphones2.webp',quantity:1,total:this.price},
        { id: 5, name: 'Headphones', price: 20, imgSrc: './image/Headphones3.webp',quantity:1,total:this.price},
    ];
    //localStorage.setItem("products",JSON.stringify(products));
    //render products
    function showProduct(products){
        let productList=document.getElementById("productlist");
        products.forEach((product)=>{
            let productDiv=document.createElement("div");
            productDiv.classList.add('product');
            productDiv.innerHTML=`
            <div class="card shadow" id='${product.id}'>
                <img src='${product.imgSrc}' class="card-img-top" alt="laptop image">
                <div class="card-body text-center">
                  <h2>${product.name}</h2>
                  <p>Price: ${product.price}</p>
                  <button class="btn btn-primary" onclick="addToCart(${product.id})">Add to cart</button>
                </div>
            </div>  `;
            productList.appendChild(productDiv);
        })
    }
    console.log(products);
    showProduct(products);

    //add to cart
    cart=JSON.parse(localStorage.getItem('cart'))||[];
    function addToCart(productid){
        const product = products.find(p => p.id === productid);
        console.log(product);
        cart.push(product);
        localStorage.setItem('cart',JSON.stringify(cart));
    }
    document.getElementById('cart-item').innerHTML=cart.length;
    </script>
</body>
</html>

